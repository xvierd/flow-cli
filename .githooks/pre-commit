#!/bin/sh
# Pre-commit hook: runs gofmt and go vet before every commit.
# Install once with: git config core.hooksPath .githooks

set -e

# --- gofmt ---
UNFORMATTED=$(gofmt -l .)
if [ -n "$UNFORMATTED" ]; then
  echo "❌ gofmt: the following files need formatting:"
  echo "$UNFORMATTED"
  echo ""
  echo "  Run: gofmt -w ."
  exit 1
fi

# --- go vet ---
go vet ./... || exit 1

echo "✅ pre-commit checks passed"
